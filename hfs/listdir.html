<!DOCTYPE html>
<html>
  <head>
    <title>{{ host }} - Nano http server</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/static/main.css">
    <script src="/static/jquery.min.js"></script>
    <script src="/static/qrcode.js"></script>
    <script src="/static/main.js"></script>
  </head>
  <body>
    <h2>
      <a href="/">{{ host }}</a>
% for ditem in ancestors_dlist:
      <span>/</span>
      <a href="{{ ditem.dpath }}">{{ ditem.dname }}</a>
% end
    </h2>
    <div id="file-browser">
% if any(map(lambda x: x.hidden, flist)):
      <div id="btn-show-hidden-files" class="btn btn-show">[&#8594; show hidden files]</div>

      <div id="hidden-files" class="hidden">
        <div class="btn btn-hide" colspan="3">[&#8595; hide hidden files]</div>
        <table><tbody>
  % for fitem in filter(lambda x: x.hidden, flist):
        <tr class="q-item" onmouseenter="show_qr_code('/{{ curdir }}/{{ fitem.fname }}');">
          <td>{{ fitem.mtime }}</td>
          <td>{{ fitem.size }}</td>
          <td><a href="/{{ curdir }}/{{ fitem.fname }}">{{ fitem.ftext }}</a><td>
        </tr>
  % end
        </tbody></table>
        <div class="btn btn-hide"><td>[&#8593; hide hidden files]</div>
      </div>
% end
      <p>
        <table><tbody>
% for fitem in filter(lambda x: not x.hidden, flist):
          <tr class="q-item" onmouseenter="show_qr_code('http://{{ host }}/{{ curdir }}/{{ fitem.fname }}');">
            <td>{{ fitem.mtime }}</td>
            <td>{{ fitem.size }}</td>
            <td><a href="/{{ curdir }}/{{ fitem.fname }}">{{ fitem.ftext }}</a></td>
          </tr>
% end
        </tbody></table>
      </p>
    </div>
    <div id="qrcode"></div>
    <hr>
    <h2>Upload file:</h2>
    <input type="file" id="file" name="upload" multiple>
    <input id="curdir" type="hidden" value="{{ curdir }}">
    <ul id="pending_files">
    </ul>

    <button id="btn_upload">上傳</button><br>
    <div id="message"></div>
  </body>
</html>
