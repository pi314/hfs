<html>
  <head>
    <title>{{ host }} - Nano http server</title>
    <link rel="stylesheet" href="/static/main.css">
    <script src="/static/jquery.min.js"></script>
    <script src="/static/qrcode.js"></script>
    <script src="/static/main.js"></script>
  </head>
  <body>
    <h2>
      <a href="/">{{ host }}</a>
% for ditem in upper_dlist:
      <span>/</span>
      <a href="{{ ditem.dpath }}">{{ ditem.dname }}</a>
% end
    </h2>
    <div id="file-browser">
% if any(map(lambda x: x.hidden, flist)):
      <ul id="btn-show-hidden-files">
        <li class="btn btn-show">[&#8594; show hidden files]</li>
      </ul>
      <ul id="hidden-files" class="hidden">
        <li class="btn btn-hide">[&#8595; hide hidden files]</li>
  % for fitem in filter(lambda x: x.hidden, flist):
    % if fitem.ftext.endswith('/'):
        <li>
          <span>{{ fitem.mtime }}</span>
          <a href="/{{ curdir }}/{{ fitem.fname }}">{{ fitem.ftext }}</a>
        </li>
    % else:
        <li class="q-item" onmouseenter="show_qr_code('/{{ curdir }}/{{ fitem.fname }}');">
          <span>{{ fitem.mtime }}</span>
          <a href="/{{ curdir }}/{{ fitem.fname }}">{{ fitem.ftext }}</a>
        </li>
    % end
  % end
        <li class="btn btn-hide">[&#8593; hide hidden files]</li>
      </ul>
% end
      <ul>
% for fitem in filter(lambda x: not x.hidden, flist):
  % if fitem.ftext.endswith('/'):
        <li>
          <span>{{ fitem.mtime }}</span>
          <a href="/{{ curdir }}/{{ fitem.fname }}">{{ fitem.ftext }}</a>
        </li>
  % else:
        <li class="q-item" onmouseenter="show_qr_code('http://{{ host }}/{{ curdir }}/{{ fitem.fname }}');">
          <span>{{ fitem.mtime }}</span>
          <a href="/{{ curdir }}/{{ fitem.fname }}">{{ fitem.ftext }}</a>
        </li>
  % end
% end
      </ul>
    </div>
    <div id="qrcode"></div>
    <hr>
    <h2>Upload file:</h2>
    <form method="POST" action="/{{ curdir }}" enctype="multipart/form-data">
      <input type="file" name="upload">
      <input type="submit" value="上傳">
    </form>
  </body>
</html>
